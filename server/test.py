"TESTING ENVRIONMENT ONLY"
"NOT TO BE USED IN PRODUCTION"





from openai import OpenAI
from dotenv import load_dotenv
from langchain.vectorstores.chroma import Chroma
from server.core.get_embedding_function import get_embedding_function
from pathlib import Path
import os


load_dotenv()

text = {
  "response": {
    "Basic Probability Concepts and Definitions": "**Course Content: Understanding Probability**  \n\n---\n\n### **Slide 1: Introduction to Probability**  \n- **Definition**:  \n  - Probability measures the likelihood of an event occurring, expressed as a value between **0** (impossible) and **1** (certain).  \n- **Key Perspectives**:  \n  1. **Experimental Probability**: Based on repeated trials (e.g., flipping a coin 100 times).  \n  2. **Subjective Probability**: An educated guess (e.g., predicting sports outcomes).  \n  3. **Theoretical Probability**: Calculated using mathematical principles (e.g., rolling a die).  \n\n---\n\n### **Slide 2: Basic Terminology**  \n- **Experiment**: A process with uncertain outcomes (e.g., rolling a die, drawing a card).  \n- **Outcome**: A single result of an experiment (e.g., rolling a \"3\").  \n- **Event**: A set of outcomes (e.g., rolling an even number).  \n- **Sample Space (S)**: The set of all possible outcomes (e.g., {1, 2, 3, 4, 5, 6} for a die).  \n- **Simple Event**: An event with only one outcome (e.g., rolling a \"5\").  \n\n---\n\n### **Slide 3: Theoretical Probability Formula**  \n- **Formula**:  \n  \\[\n  P(\\text{Event}) = \\frac{\\text{Number of favorable outcomes}}{\\text{Total possible outcomes}} = \\frac{m}{n}\n  \\]  \n- **Example**:  \n  - Probability of rolling a \"2\" on a die: \\( P(2) = \\frac{1}{6} \\).  \n  - Probability of drawing a heart from a deck: \\( P(\\text{Heart}) = \\frac{13}{52} = \\frac{1}{4} \\).  \n\n---\n\n### **Slide 4: Probability of Compound Events**  \n- **Sum of Two Dice**:  \n  - Sample space: 36 outcomes (6 × 6).  \n  - Probability distribution:  \n    - \\( P(2) = \\frac{1}{36} \\), \\( P(7) = \\frac{6}{36} \\), etc.  \n- **Key Insight**:  \n  - Probabilities depend on **how many ways** an event can occur (e.g., more combinations yield a sum of 7).  \n\n---\n\n### **Slide 5: Rules of Probability**  \n1. **Range**: \\( 0 \\leq P(\\text{Event}) \\leq 1 \\).  \n2. **Certainty**: \\( P(S) = 1 \\) (one outcome must occur).  \n3. **Additivity**: For mutually exclusive events \\( A \\) and \\( B \\):  \n   \\[\n   P(A \\text{ or } B) = P(A) + P(B)\n   \\]  \n4. **Complement Rule**:  \n   \\[\n   P(\\text{Not } A) = 1 - P(A)\n   \\]  \n\n---\n\n### **Slide 6: Experimental vs. Theoretical Probability**  \n- **Experimental**:  \n  - Derived from real-world trials (e.g., 10% chance of rain based on historical data).  \n- **Theoretical**:  \n  - Based on ideal conditions (e.g., fair coin, unbiased die).  \n- **Example**:  \n  - After 100 coin flips, 48 heads: Experimental \\( P(\\text{Heads}) = 0.48 \\).  \n  - Theoretical \\( P(\\text{Heads}) = 0.5 \\).  \n\n---\n\n### **Slide 7: Advanced Example – Children’s Gender**  \n- **Sample Space**:  \n  - For 3 children: \\( S = \\{bbb, bbg, bgb, bgg, gbb, gbg, ggb, ggg\\} \\) (8 outcomes).  \n- **Probability of 2 Boys and 1 Girl**:  \n  - Favorable outcomes: \\( bbg, bgb, gbb \\).  \n  - \\( P = \\frac{3}{8} \\).  \n\n---\n\n### **Slide 8: Common Misconceptions**  \n- **Equally Likely Assumption**: Not all outcomes are equally probable (e.g., sum of 7 vs. 2 in dice).  \n- **Independence**: Past outcomes don’t affect future ones (e.g., \"Gambler’s Fallacy\").  \n- **Subjectivity**: Educated guesses may lack empirical support (e.g., predicting sports wins).  \n\n---\n\n### **Slide 9: Applications of Probability**  \n- **Real-World Uses**:  \n  - Weather forecasting, risk assessment, game theory, medical trials.  \n- **Expected Value**:  \n  - Average outcome over many trials (e.g., expected sum when rolling two dice = 7).  \n\n---\n\n### **Slide 10: Summary**  \n- Probability quantifies uncertainty using **experimental**, **subjective**, or **theoretical** methods.  \n- Key concepts: **sample space**, **events**, **outcomes**, and rules like additivity.  \n- Always verify assumptions (e.g., fairness of dice) for accurate calculations.  \n\n--- \n\n**End of Course Content** – Includes foundational principles, examples, and applications for a comprehensive understanding of probability.",
    " Probability Distributions and Random Variables": "**Course Content: Understanding Probability**  \n*(PPT-Friendly Structure)*  \n\n---\n\n### **Slide 1: Introduction to Probability**  \n**Definition**:  \n- Probability quantifies the likelihood of an event occurring, ranging from 0 (impossible) to 1 (certain).  \n\n**Key Perspectives**:  \n1. **Experimental Probability**:  \n   - Based on repeated trials (e.g., flipping a coin 100 times, observing 50 heads).  \n   - Example: Weather forecasts (\"10% chance of rain\" derived from historical data).  \n2. **Subjective Probability**:  \n   - Educated guess based on expertise (e.g., predicting a 75% chance a baseball team will win).  \n3. **Theoretical Probability**:  \n   - Mathematical calculation: \\( P(\\text{Event}) = \\frac{\\text{Number of favorable outcomes}}{\\text{Total possible outcomes}} \\).  \n\n---\n\n### **Slide 2: Basic Concepts**  \n**Terminology**:  \n- **Experiment**: A procedure with uncertain outcomes (e.g., rolling a die, drawing a card).  \n- **Outcome**: A single result of an experiment (e.g., rolling a \"3\").  \n- **Event**: A set of outcomes (e.g., rolling an even number).  \n- **Sample Space (\\( S \\))**: All possible outcomes (e.g., \\( S = \\{1, 2, 3, 4, 5, 6\\} \\) for a die).  \n\n**Example**:  \n- Coin flip: \\( S = \\{\\text{Heads}, \\text{Tails}\\} \\).  \n- Three-child family: \\( S = \\{bbb, bbg, bgb, bgg, gbb, gbg, ggb, ggg\\} \\).  \n\n---\n\n### **Slide 3: Calculating Theoretical Probability**  \n**Formula**:  \n\\[ P(E) = \\frac{\\text{Number of ways } E \\text{ can occur}}{\\text{Total possible outcomes}} \\]  \n\n**Examples**:  \n1. **Die Roll**:  \n   - Probability of rolling a 5: \\( P(5) = \\frac{1}{6} \\).  \n   - Probability of rolling an even number: \\( P(\\text{Even}) = \\frac{3}{6} = \\frac{1}{2} \\).  \n2. **Two-Dice Sum**:  \n   - \\( P(\\text{Sum}=7) = \\frac{6}{36} = \\frac{1}{6} \\) (since 6 combinations: 1-6, 2-5, 3-4, etc.).  \n   - \\( P(\\text{Sum}=2) = \\frac{1}{36} \\) (only 1-1).  \n\n---\n\n### **Slide 4: Probability Rules**  \n1. **Range of Probability**:  \n   - \\( 0 \\leq P(E) \\leq 1 \\).  \n2. **Sum of All Probabilities**:  \n   - \\( P(S) = 1 \\) (the sample space includes all possible outcomes).  \n3. **Addition Rule for Mutually Exclusive Events**:  \n   - If events \\( A \\) and \\( B \\) cannot occur together, \\( P(A \\text{ or } B) = P(A) + P(B) \\).  \n\n**Example**:  \n- Probability of rolling a 2 or 3 on a die: \\( P(2) + P(3) = \\frac{1}{6} + \\frac{1}{6} = \\frac{1}{3} \\).  \n\n---\n\n### **Slide 5: Case Study – Two-Dice Probabilities**  \n**Sum Probabilities**:  \n| Sum | 2  | 3  | 4  | 5  | 6  | 7  | 8  | 9  | 10 | 11 | 12 |  \n|-----|----|----|----|----|----|----|----|----|----|----|----|  \n| \\( P \\) | 1/36 | 2/36 | 3/36 | 4/36 | 5/36 | 6/36 | 5/36 | 4/36 | 3/36 | 2/36 | 1/36 |  \n\n**Key Insight**:  \n- Symmetry in probabilities (e.g., \\( P(2) = P(12) \\)).  \n- Higher sums near 7 are more likely due to more combinations.  \n\n---\n\n### **Slide 6: Applications and Advanced Concepts**  \n**Expected Value**:  \n- Average outcome over many trials (e.g., average sum when rolling two dice repeatedly).  \n\n**Real-World Applications**:  \n- Risk assessment, game theory, insurance, and machine learning.  \n\n**Limitations**:  \n- Theoretical probability assumes equally likely outcomes, which may not hold in complex real-world scenarios.  \n\n---\n\n**Summary**:  \nProbability provides a framework to quantify uncertainty using experiments, educated guesses, or mathematical principles. Mastery of basic concepts, rules, and calculations enables informed decision-making in diverse fields.",
    " Conditional Probability and Bayesian Inference": "**Course Content: Understanding Probability**  \n**PPT-Friendly Structure**  \n\n---\n\n### **Slide 1: Title Slide**  \n**Topic:** Introduction to Probability  \n**Key Points:**  \n- Definition of probability  \n- Types of probability  \n- Applications in real-world scenarios  \n\n---\n\n### **Slide 2: What is Probability?**  \n**Definition:**  \n- The likelihood/chance of an event occurring.  \n- Expressed as a value between **0** (impossible) and **1** (certain).  \n\n**Example:**  \n- Probability of flipping a coin and getting heads = **0.5** (50%).  \n\n**Key Formula:**  \n\\[ \\text{Probability} = \\frac{\\text{Number of favorable outcomes}}{\\text{Total possible outcomes}} \\]  \n\n---\n\n### **Slide 3: Types of Probability**  \n1. **Experimental (Empirical) Probability**  \n   - Based on repeated experiments/observations.  \n   - Example: Rain forecast (10% chance = rained 1 out of 10 similar days).  \n\n2. **Theoretical Probability**  \n   - Calculated using logic/mathematics.  \n   - Assumes all outcomes are **equally likely**.  \n   - Example: Rolling a die → Probability of 3 = \\( \\frac{1}{6} \\).  \n\n3. **Subjective Probability**  \n   - Educated guess based on intuition/experience.  \n   - Example: Predicting a 75% chance a baseball team will win.  \n\n---\n\n### **Slide 4: Basic Terminology**  \n- **Experiment:** Process with uncertain outcomes (e.g., rolling a die).  \n- **Outcome:** Single result of an experiment (e.g., rolling a 4).  \n- **Event:** Collection of outcomes (e.g., rolling an even number).  \n- **Sample Space (\\( S \\)):** Set of all possible outcomes (e.g., \\( S = \\{1, 2, 3, 4, 5, 6\\} \\) for a die).  \n\n**Simple vs. Compound Events:**  \n- Simple: A single outcome (e.g., rolling a 2).  \n- Compound: Multiple outcomes (e.g., rolling a number > 4).  \n\n---\n\n### **Slide 5: Calculating Theoretical Probability**  \n**Formula:**  \n\\[ P(A) = \\frac{\\text{Number of outcomes in event } A}{\\text{Total outcomes in sample space}} \\]  \n\n**Example 1:** Rolling a die  \n- Probability of rolling a 3: \\( \\frac{1}{6} \\).  \n\n**Example 2:** Sum of two dice  \n- Probability of sum = 7: \\( \\frac{6}{36} = \\frac{1}{6} \\) (6 favorable outcomes: 1-6, 2-5, 3-4, 4-3, 5-2, 6-1).  \n\n---\n\n### **Slide 6: Probability Rules**  \n1. **Range of Probability:** \\( 0 \\leq P(A) \\leq 1 \\).  \n2. **Sum of Probabilities:**  \n   - All outcomes in a sample space add up to 1.  \n   - Example: For a die, \\( \\frac{1}{6} \\times 6 = 1 \\).  \n3. **Complementary Events:**  \n   - \\( P(\\text{not } A) = 1 - P(A) \\).  \n\n---\n\n### **Slide 7: Real-World Applications**  \n1. **Weather Forecasting:** Using historical data for rain predictions.  \n2. **Games of Chance:** Card games, lotteries, and dice.  \n3. **Risk Assessment:** Insurance, finance, and healthcare.  \n\n**Critical Thinking:**  \n- Subjective vs. theoretical probability: Why might they differ?  \n- Example: A \"75% chance of winning\" is subjective if not all variables are controlled.  \n\n---\n\n### **Slide 8: Practice Problem**  \n**Problem:**  \nA bag contains 3 red, 2 blue, and 5 green marbles. What is the probability of picking a red marble?  \n\n**Solution:**  \n- Total marbles = 10.  \n- Favorable outcomes = 3.  \n- Probability = \\( \\frac{3}{10} = 0.3 \\).  \n\n---\n\n### **Slide 9: Summary**  \n- Probability quantifies uncertainty.  \n- **Three types:** Experimental, theoretical, subjective.  \n- **Key terms:** Experiment, outcome, event, sample space.  \n- **Rules:** Probabilities range from 0 to 1; sum to 1 in sample space.  \n\n**Final Thought:**  \n- Probability helps make informed decisions in unpredictable situations!  \n\n--- \n\n**Total Slides:** 9  \n**Visual Aids:** Include diagrams (e.g., sample space for dice), formulas, and real-world examples."
  }
}

print(text["response"])

file = Path("response.md")
file.write_text(text["response"]["Basic Probability Concepts and Definitions"], encoding='utf-8')

# CHROMA_PATH = os.getenv("CHROMA_PATH")
# db = Chroma(persist_directory=CHROMA_PATH, embedding_function=get_embedding_function())
# print("Database loaded successfully.")
# # Example query to the database
# results = db.similarity_search(query, k=5)
# #print("Results:", results)

# PROMPT_TEMPLATE = """
# Answer the question based only on the following context:

# {context}

# ---

# Answer the question based on the above context: {question}
# """
# context_text = "\n\n---\n\n".join([doc.page_content for doc in results])
# final_prompt = PROMPT_TEMPLATE.format(context=context_text, question=query)

# client = OpenAI(api_key=os.getenv("DEEPSEEK_API_KEY"), base_url="https://api.deepseek.com")
# response = client.chat.completions.create(
#     model="deepseek-reasoner",
#     messages=[
#         {"role": "user", "content": final_prompt},
#     ],
#     stream=False
# )

# print(response.choices[0].message.content)


# Manim test runs
